#!/usr/bin/env bash

#
# update script for shell-helpers
#
# place in the directory containing shell-helpers library files.
# executing will update files to their latest release.
#

main(){
  readonly CWD=$( cd $(dirname $0) ; pwd -P )
  local pattern="# @shell-helpers_UPDATE_URL="
  local match=
  local file=
  local url=

  cd $CWD
  for file in *.sh; do
    match=$(grep -m1 "^$pattern" $file) || continue
    url=${match//$pattern/}
    echo "updating $file from $url ..."
    curl --silent -LfO $url || echo "  ! failed to download $url"
  done
}

main $@
